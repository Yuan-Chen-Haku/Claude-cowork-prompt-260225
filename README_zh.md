# Interactive Knowledge Work Graph Explorer (交互式知识工作图谱资源管理器)

[English](README.md) | [中文](README_zh.md)

这是一个基于浏览器的同心圆径向图交互式可视化工具，专为探索 Claude Knowledge Work Plugins（Claude 知识工作插件）的架构及相关的 Markdown 文档文件而设计。

## 概述

本项目提供了一种具有视觉冲击力且功能强大的方法，帮助用户浏览复杂的嵌套目录结构及其内嵌的 Markdown 内容。项目基于 HTML、纯 CSS、纯 JavaScript 和 `force-graph` 库构建，并渲染出一个动态图谱，其中：
- 根工作区稳固地固定在正中心。
- 目录根据其深度呈不同的同心圆环向外展开。
- 单个 Markdown 文件作为叶子节点，从其父目录分支出来。

## 核心特性

### 1. 动态同心圆径向布局
- **环形结构**：节点严格按照其在文件系统中的深度组织成同心圆（深度 0 为根节点，深度 1 为顶级文件夹等）。
- **中心节点聚焦**：根节点有独特的样式（黑色），精确固定在画布的正中心 (`x: 0, y: 0`)，且不可点击，用于在视觉上锚定整个图谱。
- **节点着色**：
  - 根节点（深度 0）：黑色 (`#000000`)
  - 子目录（深度 1）：红色 (`#ff0000`)
  - 更深层目录：青绿色/海蓝色（默认）
  - 文件：蓝色
- **可自定义物理引擎控制**：悬浮的控制面板允许实时调整：
  - **环距 (Ring Spacing)**：控制同心圆之间的距离（50 到 500）。
  - **排斥力 (Node Repulsion)**：控制将节点彼此分推开来的力（-300 到 0）。

### 2. 交互式探索与焦点模式
- **悬停效果**：将鼠标悬停在节点上，会以标准工具提示显示其名称。
- **点击聚焦**：
  - 点击文件或目录节点（除了根节点）将进入“焦点模式”。
  - 被点击的节点、其直接父节点和其直接子节点会被高亮显示。
  - 所有其他未连接的节点和连线都会优雅地变淡（节点透明度降至 `0.45`，连线透明度降至 `0.2`），从而减少视觉干扰。
- **自动取景缩放**：当点击某个节点时，图谱会自动计算高亮组件的边界框，并平滑地过渡（平移和缩放）以将它们置于屏幕左侧 50% 的中心位置，确保它们不会被内容面板遮挡。
- **背景点击**：点击空白画布上的任何位置都会清除焦点模式并将图谱恢复为默认状态。

### 3. 集成的 Markdown 内容视图
- **侧滑面板**：当节点被点击时，一个带有磨砂玻璃（backdrop-filter）效果的侧边信息面板将从屏幕右侧优雅地滑出。
- **内容渲染**：
  - **文件**：面板会使用 `marked.js` 库，动态地将 Markdown 内容 (`node.content`) 渲染为格式化的 HTML。
  - **目录**：显示一条提示信息，建议点击子节点以查看文件内容。
- **一键复制**：面板标题栏内置的“复制”按钮 (📋) 允许用户一键将当前查看文件的原生 Markdown 文本拷贝到系统剪贴板。并在成功时提供直观的绿色勾号 (✅) 视觉确认。
- **动态标题栏**：面板头部会实时更新，以显示文件的名称 (`#doc-title`) 和绝对路径 (`#doc-path`)。

### 4. 强大的降级容错机制
- **脚本加载**：如果主源加载失败（对于 `force-graph` 或 `marked`），通过回退到备用 CDN（unpkg -> jsdelivr -> cdnjs）确保高可用性。

## 使用的技术栈

- **HTML5 & Vanilla CSS**：负责结构、样式和动画（磨砂玻璃面板、控制滑块）。
- **Vanilla JavaScript**：负责逻辑、状态管理和交互处理。
- **[Force-Graph](https://github.com/vasturiano/force-graph)**：用于渲染基于 WebGL 的力导向图。
- **[Marked.js](https://marked.js.org/)**: 用于在浏览器中快速且安全地解析和渲染 Markdown 内容。
- **Clipboard API**：原生的浏览器剪贴板功能支持 API。

## 使用方法

1. 克隆或下载此代码库。
2. 确保已将结构正确的 JSON 数据嵌入到脚本中或通过脚本加载。默认实现预期在一个 `graph-data-json` `<script>` 标签内包含 `nodes` 和 `links` 数组。
3. 在任何现代网络浏览器中打开 `index.html`。
4. 开始用你的鼠标/触摸板互动吧！

---
*Created as part of the Claude Knowledge Work Plugins exploration.*
